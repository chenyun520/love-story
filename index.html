<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OUR LOVE STORY - çºªå¿µæ‚å¿—</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Didot:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/magazine.css">
    <style>
        /* Inline specific styles for Cover animations if needed */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Carousel Styles */
        .carousel-container {
            width: 100%;
            overflow: hidden;
            margin: 20px 0;
            white-space: nowrap;
            position: relative;
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }

        .carousel-track {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }

        .carousel-item {
            display: inline-block;
            width: 200px;
            height: 300px;
            margin: 0 10px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            vertical-align: middle;
        }

        .carousel-item:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Timer Styles */
        .love-timer-container {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 40px auto;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .timer-digits {
            font-family: 'Didot', serif;
            font-size: 2rem;
            color: var(--accent-purple);
            font-weight: bold;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .timer-unit {
            font-size: 0.8rem;
            font-family: 'Noto Sans SC', sans-serif;
            color: var(--text-light);
            text-align: center;
            display: block;
        }

        .sheep-runner-track {
            height: 40px;
            position: relative;
            margin-top: 15px;
            border-top: 1px dashed #ddd;
        }

        .running-sheep {
            position: absolute;
            font-size: 24px;
            bottom: 5px;
            animation: runAcross 4s linear infinite;
        }

        @keyframes runAcross {
            0% { left: -10%; transform: scaleX(1); }
            100% { left: 110%; transform: scaleX(1); }
        }

        /* Cover Image on Login */
        .login-cover-card {
            width: 300px;
            height: 400px;
            background-image: url('image/cover.png');
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            position: relative;
        }

        .login-cover-card::after {
            content: '';
            position: absolute;
            top:0; left:0; right:0; bottom:0;
            background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
            border-radius: 10px;
        }

        .login-cover-title {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            z-index: 2;
            text-align: left;
        }
    </style>
</head>
<body>

    <!-- SECTION 1: COVER & LOGIN -->
    <section id="loginSection" class="cover-layout">
        <!-- Decorative Background Elements -->
        <div class="bg-deco-circle" style="width: 600px; height: 600px; top: -100px; right: -100px;"></div>
        <div class="bg-deco-circle" style="width: 400px; height: 400px; bottom: -50px; left: -50px;"></div>

        <div class="cover-content fade-in" style="display: flex; flex-direction: column; align-items: center;">

            <!-- New Cover Image Card -->
            <div class="login-cover-card">
                <div class="login-cover-title">
                    <h2 style="margin:0; font-size: 2rem; font-family: 'Didot', serif;">OUR MEMORY</h2>
                    <p style="margin:5px 0 0; font-size: 0.9rem; opacity: 0.8;">Love Commemorative Magazine</p>
                </div>
            </div>

            <div class="login-form">
                <p style="color: var(--text-light); margin-bottom: 10px;">è¯·è¾“å…¥è®¿é—®å¯†ç </p>

                <div class="input-group">
                    <input type="password" id="passwordInput" placeholder="â— â— â— â— â— â—" maxlength="6">
                </div>

                <div id="loginError" class="error-msg"></div>

                <button id="btnLogin" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    OPEN MAGAZINE
                </button>
            </div>

            <div style="margin-top: 30px; font-size: 0.8rem; color: #aaa;">
                EST. 2025.11.05
            </div>
        </div>
    </section>

    <!-- SECTION 2: TABLE OF CONTENTS (Revealed after login) -->
    <section id="tocSection" class="toc-section hidden">
        <div class="toc-header fade-in">
            <h2 class="toc-title">ç›®å½• CONTENTS</h2>
            <p style="color: var(--text-light); letter-spacing: 2px; margin-top: 10px;">ISSUE 01: BEGINNING</p>
        </div>

        <!-- NEW: Carousel / Marquee -->
        <div class="carousel-container fade-in">
            <div class="carousel-track" id="carouselTrack">
                <!-- Images injected via JS -->
            </div>
        </div>

        <div class="toc-grid fade-in" style="animation-delay: 0.2s;">

            <!-- Card 1: Manga -->
            <a href="manga.html" class="toc-card">
                <div class="card-img" style="background-image: url('image/cover.png'); background-color: #ffeef0;">
                    <div class="card-icon">ğŸ“–</div>
                </div>
                <div class="card-content">
                    <div>
                        <h3 class="card-title">æ¼«ç”»æ‹çˆ±å²</h3>
                        <p class="card-desc">ä»åˆè¯†åˆ°ç›¸çˆ±ï¼Œæ¯ä¸€ä¸ªå¿ƒåŠ¨ç¬é—´çš„æ¼«ç”»è®°å½•ã€‚</p>
                    </div>
                    <div class="card-footer">
                        READ STORY <span>â†’</span>
                    </div>
                </div>
            </a>

            <!-- Card 2: Games -->
            <a href="game.html" class="toc-card">
                <div class="card-img" style="background-color: #f0f7ff;">
                    <div class="card-icon">ğŸ®</div>
                </div>
                <div class="card-content">
                    <div>
                        <h3 class="card-title">æ¸¸æˆç« èŠ‚</h3>
                        <p class="card-desc">åŒ…å«â€œå·¥å…·å½’ä½â€ä¸å…¨æ–°çš„â€œæ°´æœæ´¾å¯¹â€æŒ‘æˆ˜ã€‚</p>
                    </div>
                    <div class="card-footer">
                        PLAY NOW <span>â†’</span>
                    </div>
                </div>
            </a>

            <!-- Card 3: Future -->
            <div class="toc-card" style="cursor: default;">
                <div class="card-img" style="background-color: #f9f9f9;">
                    <div class="card-icon" style="color: #ccc;">ğŸš§</div>
                </div>
                <div class="card-content">
                    <div>
                        <h3 class="card-title" style="color: #999;">å¾…å¼€å‘</h3>
                        <p class="card-desc">æ›´å¤šç²¾å½©å†…å®¹æ­£åœ¨ç­–åˆ’ä¸­ï¼Œæ•¬è¯·æœŸå¾…...</p>
                    </div>
                    <div class="card-footer" style="color: #ccc;">
                        COMING SOON
                    </div>
                </div>
            </div>

        </div>

        <!-- Global Love Timer Footer -->
        <div class="love-timer-container fade-in" style="animation-delay: 0.4s;">
            <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 10px; text-align: center;">æˆ‘ä»¬è¦åœ¨ä¸€èµ·å¾ˆä¹…å¾ˆä¹…...</div>
            <div class="timer-digits" id="timerDigits">
                <!-- 00 DAYS 00 HRS ... -->
            </div>
            <div class="sheep-runner-track" id="sheepTrack">
                <!-- Running Sheep injected here -->
            </div>
        </div>
    </section>

    <script src="js/seasons.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.getElementById('passwordInput');
            const btnLogin = document.getElementById('btnLogin');
            const loginError = document.getElementById('loginError');
            const loginSection = document.getElementById('loginSection');
            const tocSection = document.getElementById('tocSection');
            const carouselTrack = document.getElementById('carouselTrack');
            const timerDigits = document.getElementById('timerDigits');
            const sheepTrack = document.getElementById('sheepTrack');

            // --- CAROUSEL SETUP ---
            const images = [
                'image/cover.png', 'image/flowers.jpg', 'image/starbucks.jpg',
                'image/gallery_01.jpg', 'image/gallery_02.jpg', 'image/gallery_03.jpg',
                'image/gallery_04.jpg', 'image/gallery_05.jpg', 'image/gallery_06.jpg',
                'image/gallery_07.png', 'image/gallery_08.png'
            ];
            // Double the list for seamless loop
            const loopImages = [...images, ...images];

            loopImages.forEach(src => {
                const div = document.createElement('div');
                div.className = 'carousel-item';
                div.style.backgroundImage = `url('${src}')`;
                // Fallback color if image missing
                div.style.backgroundColor = '#eee';
                carouselTrack.appendChild(div);
            });


            // --- TIMER SETUP ---
            const startDate = new Date('2025-11-05T18:25:00');

            function updateTimer() {
                const now = new Date();
                let diff = now - startDate;

                // If counting UP (we are past the date)
                // If counting DOWN (future date), diff is negative.
                // "How long we have been together" usually implies counting UP.
                // But the date is in the future relative to 2024.
                // We will display absolute difference with appropriate label logic if needed,
                // or just absolute "Time Together".
                // Let's just do absolute time for simplicity as "Duration".

                const isFuture = diff < 0;
                diff = Math.abs(diff);

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                const prefix = isFuture ? "<span style='font-size:0.5em; display:block'>COUNTDOWN</span>" : "";

                timerDigits.innerHTML = `
                    <div style="text-align:center">${days}<span class="timer-unit">DAYS</span></div>
                    <div style="text-align:center">${hours}<span class="timer-unit">HRS</span></div>
                    <div style="text-align:center">${minutes}<span class="timer-unit">MINS</span></div>
                    <div style="text-align:center">${seconds}<span class="timer-unit">SECS</span></div>
                `;
            }

            setInterval(updateTimer, 1000);
            updateTimer();

            // --- SHEEP ANIMATION ---
            // "Every second... add a little sheep"
            // We'll spawn a sheep every second that runs across.
            setInterval(() => {
                const sheep = document.createElement('div');
                sheep.className = 'running-sheep';
                sheep.textContent = 'ğŸ‘'; // Or use an image
                sheep.style.animationDuration = (3 + Math.random() * 2) + 's'; // Random speed
                sheepTrack.appendChild(sheep);

                // Remove after animation
                setTimeout(() => {
                    sheep.remove();
                }, 5000);
            }, 1000);


            // --- LOGIN LOGIC ---
            // 1. Check Session
            if (sessionStorage.getItem('isLoggedIn') === 'true') {
                showTOC(false);
            }

            // 2. Login Logic
            function login() {
                if (passwordInput.value === '251105') {
                    sessionStorage.setItem('isLoggedIn', 'true');
                    showTOC(true);
                } else {
                    loginError.textContent = "å¯†ç é”™è¯¯ (Hint: 251105)";
                    passwordInput.classList.add('shake');
                    setTimeout(() => passwordInput.classList.remove('shake'), 500);
                }
            }

            function showTOC(animate) {
                if(animate) {
                    loginSection.style.opacity = '0';
                    loginSection.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        loginSection.classList.add('hidden');
                        tocSection.classList.remove('hidden');
                    }, 500);
                } else {
                    loginSection.classList.add('hidden');
                    tocSection.classList.remove('hidden');
                }
            }

            btnLogin.addEventListener('click', login);
            passwordInput.addEventListener('keypress', (e) => {
                if(e.key === 'Enter') login();
            });
        });
    </script>
</body>
</html>
