# Cloudflare Workers 配置文件
# 用于部署 Love Story 后端 API

name = "love-story-api"
main = "worker.js"
compatibility_date = "2024-01-01"

# D1 数据库绑定
[[d1_databases]]
binding = "DB"
database_name = "love-story-db"
database_id = "735f67a6-d65a-4a5c-8e73-3bcda87c5dc6"  # 需要替换为实际的数据库 ID

# 环境变量
[vars]
ENVIRONMENT = "production"
# JWT_SECRET = "your-secret-key-here"  # 在部署时设置

# 开发环境配置
[env.development]
name = "love-story-api-dev"

[[env.development.d1_databases]]
binding = "DB"
database_name = "love-story-db-dev"
database_id = "0aa42f92-a692-44db-9556-f563fa6a5794"

# CORS 设置（允许的前端域名）
# 在 production 环境中应该设置具体的前端域名
[env.production.vars]
ALLOWED_ORIGINS = "https://love-story-ehe.pages.dev"

[env.development.vars]
ALLOWED_ORIGINS = "*"
